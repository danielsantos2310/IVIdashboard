<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>IVI â€“ Official Volleyball Score</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.CSS">
  </head>
<body>
  <div class="app">
    <header class="no-print">
      <div class="match-setup">
        <div>
          <label>Team A</label>
          <input type="text" id="homeNameInput" value="Team A" list="teamNameList" />
        </div>
        <div>
          <label>Team B</label>
          <input type="text" id="awayNameInput" value="Team B" list="teamNameList" />
        </div>
        <div>
          <label>Match ID</label>
          <input type="text" id="matchIdInput" value="IVI-TEST-001" />
        </div>
        <div class="serve-choice">
          <label>First Serve</label>
          <div class="serve-options">
            <label><input type="radio" name="firstServe" value="home" checked /> <span id="firstServeHomeLabel">Team A</span></label>
            <label><input type="radio" name="firstServe" value="away" /> <span id="firstServeAwayLabel">Team B</span></label>
          </div>
        </div>
        <button class="btn secondary" id="btnOpenRegister">Open Register</button>
        <button class="btn secondary" id="btnNewMatch">New / Reset Match</button>
        <!-- Load Saved Match removed -->
        <!-- Set Lineups & Libero hidden for now -->
        <button class="btn secondary hidden" id="btnLineups">Set Lineups & Libero</button>
      </div>
      <datalist id="teamNameList">
        <option value="Caramel Dogs"></option>
        <option value="Rolling Thunder"></option>
        <option value="G/G"></option>
        <option value="MSVC Rats"></option>
        <option value="Fireball"></option>
        <option value="Nata"></option>
        <option value="Next Level"></option>
        <option value="MSVC Beavers"></option>
      </datalist>
    </header>

    <div class="layout">
      <!-- LEFT COLUMN: SCORE & CONTROLS -->
      <section class="score-area">
        <div class="teams-row">
          <!-- Team A -->
          <div class="team-card" id="homeCard">
            <div class="serve-indicator"></div>
            <img class="team-logo" id="homeLogoDisplay" alt="" />
            <div class="team-name" id="homeNameDisplay">Team A</div>
            <div class="set-wins">Sets: <span id="homeSets">0</span></div>
            <div class="main-score" id="homeScore">0</div>
          </div>

          <!-- Set info -->
          <div class="set-info">
            <span>Current Set</span>
            <strong id="currentSetLabel">1</strong>
          </div>

          <!-- Team B -->
          <div class="team-card" id="awayCard">
            <div class="serve-indicator"></div>
            <img class="team-logo" id="awayLogoDisplay" alt="" />
            <div class="team-name" id="awayNameDisplay">Team B</div>
            <div class="set-wins">Sets: <span id="awaySets">0</span></div>
            <div class="main-score" id="awayScore">0</div>
          </div>
        </div>

        <div class="big-buttons-row">
          <button class="btn big-btn left" id="btnPointHome">+1 Team A</button>
          <button class="btn big-btn right" id="btnPointAway">+1 Team B</button>
        </div>

        <div class="middle-controls no-print">
          <button class="btn secondary" id="btnUndo">Undo Last</button>
        </div>

        <div class="tags-row">
          <span class="tag">Best of 5 (Sets 1-4 to 25, Set 5 to 15)</span>
          <span class="tag">Minimum 2-point difference</span>
          <span class="tag" id="matchStatusTag">Status: Live</span>
        </div>
        <div class="set-summary-row">
          <div class="set-summary-label">Set scores</div>
          <div class="set-summary-values" id="setSummaryText">--</div>
        </div>

        <div class="controls-area no-print">
          <!-- Team A controls -->
          <div class="controls-group">
            <h3>Team A - Controls</h3>
            <div class="timeouts-subs" id="homeTimeoutsSubs">Timeouts: <span id="homeTimeouts">0</span>/2 (current set) | Subs: <span id="homeSubs">0</span>/6</div>
            <button class="btn secondary" id="btnTimeoutHome">Timeout A</button>
            <button class="btn secondary" id="btnCardHomeYellow">Yellow Card A</button>
            <button class="btn secondary" id="btnCardHomeRed">Red Card A</button>
            <button class="btn secondary hidden" id="btnSubHome">Substitution A</button>
          </div>

          <!-- Team B controls -->
          <div class="controls-group">
            <h3>Team B - Controls</h3>
            <div class="timeouts-subs" id="awayTimeoutsSubs">Timeouts: <span id="awayTimeouts">0</span>/2 (current set) | Subs: <span id="awaySubs">0</span>/6</div>
            <button class="btn secondary" id="btnTimeoutAway">Timeout B</button>
            <button class="btn secondary" id="btnCardAwayYellow">Yellow Card B</button>
            <button class="btn secondary" id="btnCardAwayRed">Red Card B</button>
            <button class="btn secondary hidden" id="btnSubAway">Substitution B</button>
          </div>
        </div>

        <!-- Rotation / Lineups -->
        <div class="rotation-wrapper no-print hidden">
          <div class="rotation-team">
            <h3>Team A Rotation</h3>
            <div>Libero: <span id="homeLiberoLabel">-</span></div>
            <div class="rotation-grid" id="homeRotationGrid"></div>
            <div class="rotation-hint">
              Rotation follows scoring rules: receiving team rotates when gaining serve. Libero automatically replaces the chosen player in back row (except server).
            </div>
          </div>

          <div class="rotation-team">
            <h3>Team B Rotation</h3>
            <div>Libero: <span id="awayLiberoLabel">-</span></div>
            <div class="rotation-grid" id="awayRotationGrid"></div>
            <div class="rotation-hint">
              Rotation follows scoring rules. Libero auto in/out according to back row position.
            </div>
          </div>
        </div>

        <div class="middle-controls no-print">
          <button class="btn secondary" id="btnEndSet">End Set</button>
          <button class="btn danger" id="btnEndMatch">End Match</button>
        </div>
      </section>

      <!-- RIGHT COLUMN: LOG + SQUADS -->
      <section class="log-area">
        <h2>Match Timeline</h2>
        <div class="squad-list">
          <div><strong id="homeSquadLabel">Team A Squad:</strong> <span id="homeSquadText">-</span></div>
          <div><strong id="awaySquadLabel">Team B Squad:</strong> <span id="awaySquadText">-</span></div>
        </div>
        <ul class="log-list" id="logList"></ul>
      </section>
    </div>

    <footer class="no-print">
      <div class="timers">
        <span class="timer-label">Match time:</span>
        <span class="timer-value" id="matchTimer">00:00</span>
        <span class="timer-label">Timeout:</span>
        <span class="timer-value" id="timeoutTimer">--</span>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <button class="btn secondary" id="btnOpenScoreboard">Open Scoreboard</button>
        <button class="btn secondary" id="btnOpenAudioPanel">Open Audio Panel</button>
        <button class="btn secondary" onclick="window.print()">Print / Export PDF</button>
      </div>
    </footer>
  </div>

  <!-- Match Summary Modal -->
  <div id="matchSummaryOverlay" class="summary-overlay hidden no-print">
    <div class="summary-panel">
      <div class="summary-header">
        <div>
          <div class="summary-title">Match Summary</div>
          <div class="summary-sub" id="summaryMatchId"></div>
        </div>
        <button class="btn secondary" id="btnCloseSummary">Close</button>
      </div>
      <div class="summary-body">
        <div class="summary-row">
          <div class="summary-label">Result</div>
          <div class="summary-value" id="summaryResult"></div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Duration</div>
          <div class="summary-value" id="summaryDuration"></div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Set Scores</div>
          <div class="summary-value" id="summarySets"></div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Cards</div>
          <div class="summary-value" id="summaryCards"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

